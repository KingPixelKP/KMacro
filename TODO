add relative path compatibility and full path for macro